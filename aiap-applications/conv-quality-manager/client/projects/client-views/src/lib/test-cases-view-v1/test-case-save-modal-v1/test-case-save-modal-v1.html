<ibm-modal 
  [open]="isOpen" 
  (overlaySelected)="close()" 
  size='lg'>
  <ibm-modal-header 
    (closeSelect)="close()">
    <p class="bx--modal-header__heading bx--type-beta">
      {{ 'test_cases_view_v1.save_modal_v1.header' | translate }}
    </p>
  </ibm-modal-header>
  <section ibmModalContent>
    <form #executionForm="ngForm">
      <div ibmGrid>
        <div ibmRow>
          <div ibmCol>
            <ibm-accordion>
              <ibm-accordion-item
                [title]="'test_cases_view_v1.save_modal_v1.fld_documentation.title' | translate"
                [expanded]="selections.instructionsExpanded">
                <aiap-test-case-documentation-v1></aiap-test-case-documentation-v1>
              </ibm-accordion-item>
            </ibm-accordion>
          </div>
        </div>
        <div ibmRow>&nbsp;</div>
        <div ibmRow>
          <div ibmCol [columnNumbers]="{ 'xlg': 3, 'lg': 3, 'md': 8, 'sm': 4}">
            <div ibmGrid>
              <div ibmRow>
                <div ibmCol>
                  <ibm-label>
                    {{ 'test_cases_view_v1.save_modal_v1.fld_key.label' | translate }}
                    <input 
                      ibmText 
                      required 
                      name="test_case_key" 
                      [autocomplete]="false" 
                      [(ngModel)]="testCase.key">
                  </ibm-label>
                </div>
              </div>
              <div>&nbsp;</div>
              <div ibmRow>
                <div ibmCol>
                  <ibm-label>
                    {{ 'test_cases_view_v1.save_modal_v1.fld_name.label' | translate }}
                    <input 
                      ibmText 
                      required 
                      name="test_case_name" 
                      [autocomplete]="false" 
                      [(ngModel)]="testCase.name">
                  </ibm-label>
                </div>
              </div>
              <div>&nbsp;</div>
              <div ibmRow>
                <div ibmCol>
                  <ibm-label>
                    {{ 'test_cases_view_v1.save_modal_v1.fld_tags.label' | translate }}
                    <input 
                      ibmText 
                      name="test_case_tags" 
                      [autocomplete]="false" 
                      [(ngModel)]="testCase.tags">
                  </ibm-label>
                </div>
              </div>
              <div ibmRow>&nbsp;</div>
              <div ibmRow>
                <div ibmCol>
                  <ibm-dropdown 
                    name="test_case_default_worker" 
                    placeholder="{{ 'test_cases_view_v1.save_modal_v1.fld_default_worker.placeholder' | translate }}"
                    required
                    [label]="'test_cases_view_v1.save_modal_v1.fld_default_worker.label' | translate"
                    [(ngModel)]="selections.worker">
                    <ibm-dropdown-list 
                      [items]="selections.workers">
                    </ibm-dropdown-list>
                  </ibm-dropdown>
                </div>
              </div>
              <div ibmRow>&nbsp;</div>
              <div ibmRow>
                <div ibmCol>
                  <ibm-label>
                    {{ 'test_cases_view_v1.save_modal_v1.fld_description.label' | translate }}
                    <textarea 
                      ibmTextArea
                      required
                      name="test_case_description" 
                      placeholder="{{ 'test_cases_view_v1.save_modal_v1.fld_description.placeholder' | translate }}" 
                      [rows]="15"
                      [(ngModel)]="testCase.description">
                    </textarea>
                  </ibm-label>
                </div>
              </div>
            </div>
          </div>
          <div ibmCol [columnNumbers]="{ 'xlg': 9, 'lg': 9, 'md': 8, 'sm': 4}">
            <ibm-label>
              {{ 'test_cases_view_v1.save_modal_v1.fld_test_case_script.label' | translate }}
            </ibm-label>
            <json-editor 
              [options]="jsonEditorOptions" 
              [data]="testCase.script">
            </json-editor>
          </div>
        </div>
      </div>
    </form>
  </section>
  <ibm-modal-footer>
    <button 
      ibmButton="secondary" 
      (click)="close()">
      {{ 'test_cases_view_v1.save_modal_v1.btn_cancel.text' | translate }}
    </button>
    <button 
      ibmButton="primary" 
      [disabled]="executionForm.invalid" 
      (click)="save()">
      {{ 'test_cases_view_v1.save_modal_v1.btn_save.text' | translate }}
    </button>
  </ibm-modal-footer>
</ibm-modal>
